<!-- Bootstrap CSS -->
<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
  rel="stylesheet"
/>
<style>
  .test-container {
    background-color: #f8f9fa;
    border-radius: 10px;
    padding: 30px;
    margin-bottom: 40px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
  }
  .question {
    background-color: white;
    border-left: 4px solid #fd7e14;
    padding: 20px;
    margin-bottom: 25px;
    border-radius: 0 10px 10px 0;
  }
  .btn-check {
    background: linear-gradient(135deg, #fd7e14, #dc3545);
    color: white;
    font-weight: bold;
    padding: 8px 20px;
  }
  .result {
    padding: 12px;
    margin-top: 15px;
    border-radius: 6px;
    display: none;
  }
  .correct {
    background-color: #d1e7dd;
    border: 1px solid #a3cfbb;
    color: #0f5132;
  }
  .incorrect {
    background-color: #f8d7da;
    border: 1px solid #f1aeb5;
    color: #842029;
  }
  .table-input {
    max-width: 100px;
    display: inline-block;
  }
  #score-display {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #fd7e14;
    color: white;
    padding: 10px 20px;
    border-radius: 50px;
    font-weight: bold;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    z-index: 1000;
  }
</style>

<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-lg-10">
      <div class="text-center mb-5">
        <h1>Test 2: Advanced Functions</h1>
        <p class="lead">25 Questions | Time: 60 minutes</p>
      </div>

      <div class="test-container">
        <!-- Questions 1-5: Formula Identification -->
        <div class="question">
          <p>1. Which formula matches: 7, 10, 13, 16 for x=1,2,3,4?</p>
          <select class="form-select mb-2 answer-input" data-answer="a">
            <option value="">Select</option>
            <option value="a">y = 3x + 4</option>
            <option value="b">y = 4x + 3</option>
            <option value="c">y = 2x + 5</option>
          </select>
          <button class="btn btn-check check-btn">Check Answer</button>
          <div class="result"></div>
        </div>

        <div class="question">
          <p>2. Complete table for y = x² - 1:</p>
          <table class="table table-bordered">
            <tr>
              <th>x</th>
              <td>1</td>
              <td>2</td>
              <td>3</td>
              <td>4</td>
            </tr>
            <tr>
              <th>y</th>
              <td>
                <input
                  type="number"
                  class="form-control table-input"
                  data-answer="0"
                />
              </td>
              <td>
                <input
                  type="number"
                  class="form-control table-input"
                  data-answer="3"
                />
              </td>
              <td>
                <input
                  type="number"
                  class="form-control table-input"
                  data-answer="8"
                />
              </td>
              <td>
                <input
                  type="number"
                  class="form-control table-input"
                  data-answer="15"
                />
              </td>
            </tr>
          </table>
          <button class="btn btn-check check-table">Check Table</button>
          <div class="result"></div>
        </div>

        <div class="question">
          <p>3. If input=7 gives output=22, which formula fits?</p>
          <select class="form-select mb-2 answer-input" data-answer="a">
            <option value="">Select</option>
            <option value="a">y = 3x + 1</option>
            <option value="b">y = 4x - 6</option>
            <option value="c">y = 2x + 8</option>
          </select>
          <button class="btn btn-check check-btn">Check Answer</button>
          <div class="result"></div>
        </div>

        <div class="question">
          <p>4. Calculate y = ½x + 4 when x = 6</p>
          <input
            type="number"
            class="form-control mb-2 answer-input"
            data-answer="7"
          />
          <button class="btn btn-check check-btn">Check Answer</button>
          <div class="result"></div>
        </div>

        <div class="question">
          <p>
            5. If y = 4x + 2 (red) and z = x² + 3 (black), total squares in
            Arrangement 3?
          </p>
          <input
            type="number"
            class="form-control mb-2 answer-input"
            data-answer="26"
          />
          <button class="btn btn-check check-btn">Check Answer</button>
          <div class="result"></div>
        </div>

        <!-- Questions 6-10: Real-World Applications -->
        <div class="question">
          <p>6. Hamba Kahle: R500 + R0.50/km. Fare for 300km?</p>
          <input
            type="number"
            class="form-control mb-2 answer-input"
            data-answer="650"
          />
          <button class="btn btn-check check-btn">Check Answer</button>
          <div class="result"></div>
        </div>

        <div class="question">
          <p>
            7. Saamgaan: R450 + R0.60/km vs Comfort: R480 + R0.55/km for 150km?
          </p>
          <select class="form-select mb-2 answer-input" data-answer="b">
            <option value="">Select</option>
            <option value="a">Saamgaan by R7.50</option>
            <option value="b">Comfort by R7.50</option>
            <option value="c">Same price</option>
          </select>
          <button class="btn btn-check check-btn">Check Answer</button>
          <div class="result"></div>
        </div>

        <div class="question">
          <p>8. For y = 40x + 5, find y when x = 0.25</p>
          <input
            type="number"
            class="form-control mb-2 answer-input"
            data-answer="15"
          />
          <button class="btn btn-check check-btn">Check Answer</button>
          <div class="result"></div>
        </div>

        <div class="question">
          <p>9. Red squares follow y = 6x - 3. How many in Arrangement 8?</p>
          <input
            type="number"
            class="form-control mb-2 answer-input"
            data-answer="45"
          />
          <button class="btn btn-check check-btn">Check Answer</button>
          <div class="result"></div>
        </div>

        <div class="question">
          <p>10. Solve F = 0.65d + 400 for F=600 (nearest km)</p>
          <input
            type="number"
            class="form-control mb-2 answer-input"
            data-answer="308"
          />
          <button class="btn btn-check check-btn">Check Answer</button>
          <div class="result"></div>
        </div>

        <!-- Questions 11-15: Advanced Patterns -->
        <div class="question">
          <p>11. Which represents "divide input by 2 then add 5"?</p>
          <select class="form-select mb-2 answer-input" data-answer="b">
            <option value="">Select</option>
            <option value="a">y = 2/x + 5</option>
            <option value="b">y = x/2 + 5</option>
            <option value="c">y = (x + 5)/2</option>
          </select>
          <button class="btn btn-check check-btn">Check Answer</button>
          <div class="result"></div>
        </div>

        <div class="question">
          <p>12. Complete table for y = 3x² - 2:</p>
          <table class="table table-bordered">
            <tr>
              <th>x</th>
              <td>1</td>
              <td>2</td>
              <td>3</td>
              <td>4</td>
            </tr>
            <tr>
              <th>y</th>
              <td>
                <input
                  type="number"
                  class="form-control table-input"
                  data-answer="1"
                />
              </td>
              <td>
                <input
                  type="number"
                  class="form-control table-input"
                  data-answer="10"
                />
              </td>
              <td>
                <input
                  type="number"
                  class="form-control table-input"
                  data-answer="25"
                />
              </td>
              <td>
                <input
                  type="number"
                  class="form-control table-input"
                  data-answer="46"
                />
              </td>
            </tr>
          </table>
          <button class="btn btn-check check-table">Check Table</button>
          <div class="result"></div>
        </div>

        <div class="question">
          <p>13. Write fare formula: R350 base + R1.25/km</p>
          <input
            type="text"
            class="form-control mb-2 answer-input"
            data-answer="F = 1.25d + 350"
          />
          <button class="btn btn-check check-btn">Check Answer</button>
          <div class="result"></div>
        </div>

        <div class="question">
          <p>14. If z = (x + 2)², black squares in Arrangement 5?</p>
          <input
            type="number"
            class="form-control mb-2 answer-input"
            data-answer="49"
          />
          <button class="btn btn-check check-btn">Check Answer</button>
          <div class="result"></div>
        </div>

        <div class="question">
          <p>15. Pattern: 10 red in Arrangement 1, increases by 4. Formula?</p>
          <input
            type="text"
            class="form-control mb-2 answer-input"
            data-answer="y = 4x + 6"
          />
          <button class="btn btn-check check-btn">Check Answer</button>
          <div class="result"></div>
        </div>

        <!-- Questions 16-20: Mixed Applications -->
        <div class="question">
          <p>16. Which formula matches this table?</p>
          <table class="table table-bordered mb-3">
            <tr>
              <th>x</th>
              <td>1</td>
              <td>2</td>
              <td>3</td>
              <td>4</td>
            </tr>
            <tr>
              <th>y</th>
              <td>4</td>
              <td>7</td>
              <td>10</td>
              <td>13</td>
            </tr>
          </table>
          <select class="form-select mb-2 answer-input" data-answer="b">
            <option value="">Select</option>
            <option value="a">y = 2x + 2</option>
            <option value="b">y = 3x + 1</option>
            <option value="c">y = x + 3</option>
          </select>
          <button class="btn btn-check check-btn">Check Answer</button>
          <div class="result"></div>
        </div>

        <div class="question">
          <p>17. Complete table for y = 0.5x + 3:</p>
          <table class="table table-bordered">
            <tr>
              <th>x</th>
              <td>2</td>
              <td>4</td>
              <td>6</td>
              <td>8</td>
            </tr>
            <tr>
              <th>y</th>
              <td>
                <input
                  type="number"
                  class="form-control table-input"
                  data-answer="4"
                />
              </td>
              <td>
                <input
                  type="number"
                  class="form-control table-input"
                  data-answer="5"
                />
              </td>
              <td>
                <input
                  type="number"
                  class="form-control table-input"
                  data-answer="6"
                />
              </td>
              <td>
                <input
                  type="number"
                  class="form-control table-input"
                  data-answer="7"
                />
              </td>
            </tr>
          </table>
          <button class="btn btn-check check-table">Check Table</button>
          <div class="result"></div>
        </div>

        <div class="question">
          <p>18. If input=5 gives output=19, which formula fits?</p>
          <select class="form-select mb-2 answer-input" data-answer="a">
            <option value="">Select</option>
            <option value="a">y = 4x - 1</option>
            <option value="b">y = 3x + 4</option>
            <option value="c">y = 2x + 9</option>
          </select>
          <button class="btn btn-check check-btn">Check Answer</button>
          <div class="result"></div>
        </div>

        <div class="question">
          <p>19. Calculate y = ⅓x + 5 when x = 9</p>
          <input
            type="number"
            class="form-control mb-2 answer-input"
            data-answer="8"
          />
          <button class="btn btn-check check-btn">Check Answer</button>
          <div class="result"></div>
        </div>

        <div class="question">
          <p>
            20. If y = 5x + 1 (red) and z = 2x² (black), total squares in
            Arrangement 4?
          </p>
          <input
            type="number"
            class="form-control mb-2 answer-input"
            data-answer="53"
          />
          <button class="btn btn-check check-btn">Check Answer</button>
          <div class="result"></div>
        </div>

        <!-- Questions 21-25: Challenge Problems -->
        <div class="question">
          <p>21. A company charges R600 plus R1.75/km. Fare for 180km?</p>
          <input
            type="number"
            class="form-control mb-2 answer-input"
            data-answer="915"
          />
          <button class="btn btn-check check-btn">Check Answer</button>
          <div class="result"></div>
        </div>

        <div class="question">
          <p>22. For y = 50x + 10, find y when x = 0.4</p>
          <input
            type="number"
            class="form-control mb-2 answer-input"
            data-answer="30"
          />
          <button class="btn btn-check check-btn">Check Answer</button>
          <div class="result"></div>
        </div>

        <div class="question">
          <p>23. Black squares follow z = x² + x. How many in Arrangement 5?</p>
          <input
            type="number"
            class="form-control mb-2 answer-input"
            data-answer="30"
          />
          <button class="btn btn-check check-btn">Check Answer</button>
          <div class="result"></div>
        </div>

        <div class="question">
          <p>24. Solve F = 0.80d + 350 for F=500 (nearest km)</p>
          <input
            type="number"
            class="form-control mb-2 answer-input"
            data-answer="188"
          />
          <button class="btn btn-check check-btn">Check Answer</button>
          <div class="result"></div>
        </div>

        <div class="question">
          <p>25. Pattern: 12 red in Arrangement 1, increases by 5. Formula?</p>
          <input
            type="text"
            class="form-control mb-2 answer-input"
            data-answer="y = 5x + 7"
          />
          <button class="btn btn-check check-btn">Check Answer</button>
          <div class="result"></div>
        </div>
      </div>

      <div class="text-center mt-4">
        <button id="check-all" class="btn btn-warning btn-lg me-2">
          Check All Answers
        </button>
        <button id="reset-btn" class="btn btn-outline-secondary btn-lg">
          Reset
        </button>
      </div>
    </div>
  </div>
</div>

<div id="score-display">Score: <span id="score">0</span>/25</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // Same JavaScript as Test 1 (copy the entire script section)
  document.addEventListener("DOMContentLoaded", function () {
    let score = 0;
    const totalQuestions = 25;

    // Update score display
    function updateScore() {
      document.getElementById("score").textContent = score;
      const percentage = (score / totalQuestions) * 100;
      const scoreDisplay = document.getElementById("score-display");

      if (percentage >= 80) {
        scoreDisplay.style.background =
          "linear-gradient(135deg, #28a745, #20c997)";
      } else if (percentage >= 50) {
        scoreDisplay.style.background =
          "linear-gradient(135deg, #ffc107, #fd7e14)";
      } else {
        scoreDisplay.style.background =
          "linear-gradient(135deg, #dc3545, #d63384)";
      }
    }

    // Check individual answers
    document.querySelectorAll(".check-btn").forEach((btn) => {
      btn.addEventListener("click", function () {
        const questionDiv = this.closest(".question");
        const input = questionDiv.querySelector(".answer-input");
        const resultDiv = questionDiv.querySelector(".result");
        const correctAnswer = input.dataset.answer;
        let userAnswer = input.value.trim();

        if (input.tagName === "SELECT") {
          userAnswer = input.options[input.selectedIndex].text;
        }

        if (!questionDiv.dataset.checked) {
          if (userAnswer.toLowerCase() === correctAnswer.toLowerCase()) {
            resultDiv.textContent = "✓ Correct!";
            resultDiv.className = "result correct";
            score++;
          } else {
            resultDiv.textContent = `✗ Incorrect. Correct answer: ${correctAnswer}`;
            resultDiv.className = "result incorrect";
          }
          questionDiv.dataset.checked = "true";
          updateScore();
        }
        resultDiv.style.display = "block";
      });
    });

    // Check table answers
    document.querySelectorAll(".check-table").forEach((btn) => {
      btn.addEventListener("click", function () {
        const questionDiv = this.closest(".question");
        const inputs = questionDiv.querySelectorAll(".table-input");
        const resultDiv = questionDiv.querySelector(".result");

        if (!questionDiv.dataset.checked) {
          let allCorrect = true;
          let results = [];

          inputs.forEach((input) => {
            const correctAnswer = input.dataset.answer;
            const userAnswer = input.value.trim();

            if (userAnswer === correctAnswer) {
              input.style.backgroundColor = "#d4edda";
              results.push(
                `✓ ${input.previousElementSibling.textContent}: Correct`
              );
            } else {
              input.style.backgroundColor = "#f8d7da";
              results.push(
                `✗ ${input.previousElementSibling.textContent}: Incorrect (Correct: ${correctAnswer})`
              );
              allCorrect = false;
            }
          });

          if (allCorrect) score++;
          questionDiv.dataset.checked = "true";
          updateScore();

          resultDiv.innerHTML = results.join("<br>");
          resultDiv.className = `result ${
            allCorrect ? "correct" : "incorrect"
          }`;
          resultDiv.style.display = "block";
        }
      });
    });

    // Check all answers
    document.getElementById("check-all").addEventListener("click", function () {
      document.querySelectorAll(".check-btn").forEach((btn) => btn.click());
      document.querySelectorAll(".check-table").forEach((btn) => btn.click());
    });

    // Reset all answers
    document.getElementById("reset-btn").addEventListener("click", function () {
      score = 0;
      updateScore();

      document.querySelectorAll(".question").forEach((q) => {
        delete q.dataset.checked;
        const resultDiv = q.querySelector(".result");
        if (resultDiv) {
          resultDiv.style.display = "none";
          resultDiv.className = "result";
          resultDiv.textContent = "";
        }

        q.querySelectorAll("input").forEach((input) => {
          input.style.backgroundColor = "";
          if (input.type !== "number") input.value = "";
        });

        q.querySelectorAll("select").forEach((select) => {
          select.selectedIndex = 0;
        });
      });
    });
  });
</script>
