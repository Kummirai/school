{% extends "base.html" %} {% block title %}{{ exam.title }}{% endblock %} {%
block content %}
<head>
  <meta name="exam-title" content="Grade 7 English Exam: Sentence Structure" />
  <meta name="exam-grade" content="7" />
  <meta name="exam-subject" content="English" />
  <meta
    name="exam-description"
    content="Comprehensive exam focusing on sentence structure, types, and construction for Grade 7 English."
  />
  <meta name="exam-duration" content="45" />
  <meta name="exam-difficulty" content="Medium" />
  <style>
    .correct .form-check-label {
      color: #198754; /* Bootstrap success green */
      font-weight: bold;
    }
    .incorrect .form-check-label {
      color: #dc3545; /* Bootstrap danger red */
      text-decoration: line-through;
    }
    .correct-answer .form-check-label {
      color: #198754;
      font-weight: bold;
    }
    .feedback {
      font-size: 0.9em;
      font-weight: bold;
    }
    .correct-feedback {
      color: #198754;
    }
    .incorrect-feedback {
      color: #dc3545;
    }
    .sentence-example {
      background-color: #f8f9fa;
      padding: 10px;
      border-radius: 5px;
      margin: 10px 0;
      font-style: italic;
    }
  </style>
</head>
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="mb-0">{{ exam.title }}</h1>
    <div id="timer" class="fw-bold fs-4 text-danger"></div>
  </div>
  <p>{{ exam.description }}</p>
  <form
    action="{{ url_for('exam.submit_exam', exam_id=exam.id) }}"
    method="post"
    id="exam-form"
  >
    <div id="questions-container">
      <!-- Section 1: Complete Sentences -->
      <div class="card mb-3 question">
        <div class="card-body">
          <h5 class="card-title">Complete Sentences</h5>
          <p class="card-text">
            1. Which of the following is a complete sentence?
          </p>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_1"
              id="q1_option1"
              value="Running through the park on sunny days."
            />
            <label class="form-check-label" for="q1_option1"
              >Running through the park on sunny days.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_1"
              id="q1_option2"
              value="The children played soccer after school."
              correct="true"
            />
            <label class="form-check-label" for="q1_option2"
              >The children played soccer after school.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_1"
              id="q1_option3"
              value="Because the weather was perfect for swimming."
            />
            <label class="form-check-label" for="q1_option3"
              >Because the weather was perfect for swimming.</label
            >
          </div>
        </div>
      </div>

      <div class="card mb-3 question">
        <div class="card-body">
          <p class="card-text">2. Identify the sentence fragment:</p>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_2"
              id="q2_option1"
              value="We went to the beach last weekend."
            />
            <label class="form-check-label" for="q2_option1"
              >We went to the beach last weekend.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_2"
              id="q2_option2"
              value="The waves were enormous that day."
            />
            <label class="form-check-label" for="q2_option2"
              >The waves were enormous that day.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_2"
              id="q2_option3"
              value="Building sandcastles with my little sister."
              correct="true"
            />
            <label class="form-check-label" for="q2_option3"
              >Building sandcastles with my little sister.</label
            >
          </div>
        </div>
      </div>

      <!-- Section 2: Sentence Types -->
      <div class="card mb-3 question">
        <div class="card-body">
          <h5 class="card-title">Sentence Types</h5>
          <p class="card-text">
            3. Identify this sentence type: "The sun was shining, and the birds
            were singing."
          </p>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_3"
              id="q3_option1"
              value="Simple"
            />
            <label class="form-check-label" for="q3_option1">Simple</label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_3"
              id="q3_option2"
              value="Compound"
              correct="true"
            />
            <label class="form-check-label" for="q3_option2">Compound</label>
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_3"
              id="q3_option3"
              value="Complex"
            />
            <label class="form-check-label" for="q3_option3">Complex</label>
          </div>
        </div>
      </div>

      <div class="card mb-3 question">
        <div class="card-body">
          <p class="card-text">4. Which sentence is complex?</p>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_4"
              id="q4_option1"
              value="I enjoy reading mystery novels."
            />
            <label class="form-check-label" for="q4_option1"
              >I enjoy reading mystery novels.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_4"
              id="q4_option2"
              value="When I finish my homework, I can watch TV."
              correct="true"
            />
            <label class="form-check-label" for="q4_option2"
              >When I finish my homework, I can watch TV.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_4"
              id="q4_option3"
              value="The dog barked, and the cat ran away."
            />
            <label class="form-check-label" for="q4_option3"
              >The dog barked, and the cat ran away.</label
            >
          </div>
        </div>
      </div>

      <div class="card mb-3 question">
        <div class="card-body">
          <p class="card-text">5. Identify the simple sentence:</p>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_5"
              id="q5_option1"
              value="After the rain stopped, we went outside."
            />
            <label class="form-check-label" for="q5_option1"
              >After the rain stopped, we went outside.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_5"
              id="q5_option2"
              value="The flowers bloomed in the garden."
              correct="true"
            />
            <label class="form-check-label" for="q5_option2"
              >The flowers bloomed in the garden.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_5"
              id="q5_option3"
              value="I wanted to go swimming, but the pool was closed."
            />
            <label class="form-check-label" for="q5_option3"
              >I wanted to go swimming, but the pool was closed.</label
            >
          </div>
        </div>
      </div>

      <!-- Section 3: Combining Sentences -->
      <div class="card mb-3 question">
        <div class="card-body">
          <h5 class="card-title">Combining Sentences</h5>
          <p class="card-text">
            6. Choose the best way to combine these sentences: "I finished my
            book. I started a new one."
          </p>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_6"
              id="q6_option1"
              value="I finished my book, I started a new one."
            />
            <label class="form-check-label" for="q6_option1"
              >I finished my book, I started a new one.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_6"
              id="q6_option2"
              value="I finished my book and started a new one."
              correct="true"
            />
            <label class="form-check-label" for="q6_option2"
              >I finished my book and started a new one.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_6"
              id="q6_option3"
              value="I finished my book but started a new one."
            />
            <label class="form-check-label" for="q6_option3"
              >I finished my book but started a new one.</label
            >
          </div>
        </div>
      </div>

      <div class="card mb-3 question">
        <div class="card-body">
          <p class="card-text">
            7. Which is the best combination of these sentences: "The movie was
            long. It was exciting."
          </p>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_7"
              id="q7_option1"
              value="The movie was long, it was exciting."
            />
            <label class="form-check-label" for="q7_option1"
              >The movie was long, it was exciting.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_7"
              id="q7_option2"
              value="The movie was long but exciting."
              correct="true"
            />
            <label class="form-check-label" for="q7_option2"
              >The movie was long but exciting.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_7"
              id="q7_option3"
              value="The movie was long and it was exciting."
            />
            <label class="form-check-label" for="q7_option3"
              >The movie was long and it was exciting.</label
            >
          </div>
        </div>
      </div>

      <!-- Section 4: Sentence Parts -->
      <div class="card mb-3 question">
        <div class="card-body">
          <h5 class="card-title">Sentence Parts</h5>
          <p class="card-text">
            8. Identify the subject in this sentence: "After school, my friends
            and I play basketball at the park."
          </p>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_8"
              id="q8_option1"
              value="After school"
            />
            <label class="form-check-label" for="q8_option1"
              >After school</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_8"
              id="q8_option2"
              value="my friends and I"
              correct="true"
            />
            <label class="form-check-label" for="q8_option2"
              >my friends and I</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_8"
              id="q8_option3"
              value="play basketball"
            />
            <label class="form-check-label" for="q8_option3"
              >play basketball</label
            >
          </div>
        </div>
      </div>

      <div class="card mb-3 question">
        <div class="card-body">
          <p class="card-text">
            9. What is the predicate in this sentence? "The librarian organized
            all the new books on the shelves."
          </p>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_9"
              id="q9_option1"
              value="The librarian"
            />
            <label class="form-check-label" for="q9_option1"
              >The librarian</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_9"
              id="q9_option2"
              value="organized all the new books on the shelves"
              correct="true"
            />
            <label class="form-check-label" for="q9_option2"
              >organized all the new books on the shelves</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_9"
              id="q9_option3"
              value="all the new books"
            />
            <label class="form-check-label" for="q9_option3"
              >all the new books</label
            >
          </div>
        </div>
      </div>

      <!-- Section 5: Sentence Errors -->
      <div class="card mb-3 question">
        <div class="card-body">
          <h5 class="card-title">Sentence Errors</h5>
          <p class="card-text">10. Which sentence contains a run-on error?</p>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_10"
              id="q10_option1"
              value="I studied for the test all night, so I was tired the next day."
            />
            <label class="form-check-label" for="q10_option1"
              >I studied for the test all night, so I was tired the next
              day.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_10"
              id="q10_option2"
              value="I wanted to go to the party I had too much homework to do."
              correct="true"
            />
            <label class="form-check-label" for="q10_option2"
              >I wanted to go to the party I had too much homework to do.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_10"
              id="q10_option3"
              value="Although I wanted to go to the party, I had too much homework."
            />
            <label class="form-check-label" for="q10_option3"
              >Although I wanted to go to the party, I had too much
              homework.</label
            >
          </div>
        </div>
      </div>

      <div class="card mb-3 question">
        <div class="card-body">
          <p class="card-text">
            11. Identify the sentence with correct comma usage:
          </p>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_11"
              id="q11_option1"
              value="Before we leave we should check the weather."
            />
            <label class="form-check-label" for="q11_option1"
              >Before we leave we should check the weather.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_11"
              id="q11_option2"
              value="Before we leave, we should check the weather."
              correct="true"
            />
            <label class="form-check-label" for="q11_option2"
              >Before we leave, we should check the weather.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_11"
              id="q11_option3"
              value="Before, we leave, we should check the weather."
            />
            <label class="form-check-label" for="q11_option3"
              >Before, we leave, we should check the weather.</label
            >
          </div>
        </div>
      </div>

      <!-- Section 6: Sentence Construction -->
      <div class="card mb-3 question">
        <div class="card-body">
          <h5 class="card-title">Sentence Construction</h5>
          <p class="card-text">
            12. Rearrange these words to form a correct sentence:<br />
            "always / my / I / homework / before / do / dinner"
          </p>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_12"
              id="q12_option1"
              value="I always do my homework before dinner."
              correct="true"
            />
            <label class="form-check-label" for="q12_option1"
              >I always do my homework before dinner.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_12"
              id="q12_option2"
              value="Before dinner I always do my homework."
            />
            <label class="form-check-label" for="q12_option2"
              >Before dinner I always do my homework.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_12"
              id="q12_option3"
              value="My homework I always do before dinner."
            />
            <label class="form-check-label" for="q12_option3"
              >My homework I always do before dinner.</label
            >
          </div>
        </div>
      </div>

      <div class="card mb-3 question">
        <div class="card-body">
          <p class="card-text">13. Which sentence is correctly structured?</p>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_13"
              id="q13_option1"
              value="Quickly ran the dog to the park."
            />
            <label class="form-check-label" for="q13_option1"
              >Quickly ran the dog to the park.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_13"
              id="q13_option2"
              value="The dog quickly ran to the park."
              correct="true"
            />
            <label class="form-check-label" for="q13_option2"
              >The dog quickly ran to the park.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_13"
              id="q13_option3"
              value="To the park quickly ran the dog."
            />
            <label class="form-check-label" for="q13_option3"
              >To the park quickly ran the dog.</label
            >
          </div>
        </div>
      </div>

      <!-- Section 7: Active/Passive Voice -->
      <div class="card mb-3 question">
        <div class="card-body">
          <h5 class="card-title">Active and Passive Voice</h5>
          <p class="card-text">14. Which sentence is in active voice?</p>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_14"
              id="q14_option1"
              value="The trophy was won by our team."
            />
            <label class="form-check-label" for="q14_option1"
              >The trophy was won by our team.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_14"
              id="q14_option2"
              value="Our team won the trophy."
              correct="true"
            />
            <label class="form-check-label" for="q14_option2"
              >Our team won the trophy.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_14"
              id="q14_option3"
              value="The game was played by both teams."
            />
            <label class="form-check-label" for="q14_option3"
              >The game was played by both teams.</label
            >
          </div>
        </div>
      </div>

      <div class="card mb-3 question">
        <div class="card-body">
          <p class="card-text">
            15. Change this sentence to passive voice: "The chef prepared a
            delicious meal."
          </p>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_15"
              id="q15_option1"
              value="A delicious meal was prepared by the chef."
              correct="true"
            />
            <label class="form-check-label" for="q15_option1"
              >A delicious meal was prepared by the chef.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_15"
              id="q15_option2"
              value="The chef was preparing a delicious meal."
            />
            <label class="form-check-label" for="q15_option2"
              >The chef was preparing a delicious meal.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_15"
              id="q15_option3"
              value="Prepared by the chef was a delicious meal."
            />
            <label class="form-check-label" for="q15_option3"
              >Prepared by the chef was a delicious meal.</label
            >
          </div>
        </div>
      </div>

      <!-- Section 8: Sentence Variety -->
      <div class="card mb-3 question">
        <div class="card-body">
          <h5 class="card-title">Sentence Variety</h5>
          <p class="card-text">
            16. Which version shows the best sentence variety?
          </p>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_16"
              id="q16_option1"
              value="I woke up. I brushed my teeth. I ate breakfast. I went to school."
            />
            <label class="form-check-label" for="q16_option1"
              >I woke up. I brushed my teeth. I ate breakfast. I went to
              school.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_16"
              id="q16_option2"
              value="After waking up, I brushed my teeth and ate breakfast before going to school."
              correct="true"
            />
            <label class="form-check-label" for="q16_option2"
              >After waking up, I brushed my teeth and ate breakfast before
              going to school.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_16"
              id="q16_option3"
              value="I woke up and brushed my teeth. I ate breakfast. Then I went to school."
            />
            <label class="form-check-label" for="q16_option3"
              >I woke up and brushed my teeth. I ate breakfast. Then I went to
              school.</label
            >
          </div>
        </div>
      </div>

      <!-- Section 9: Sentence Expansion -->
      <div class="card mb-3 question">
        <div class="card-body">
          <p class="card-text">
            17. Which sentence is the most descriptive and expanded?
          </p>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_17"
              id="q17_option1"
              value="The dog ran."
            />
            <label class="form-check-label" for="q17_option1"
              >The dog ran.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_17"
              id="q17_option2"
              value="The big, brown dog ran quickly across the grassy field."
              correct="true"
            />
            <label class="form-check-label" for="q17_option2"
              >The big, brown dog ran quickly across the grassy field.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_17"
              id="q17_option3"
              value="The dog ran fast."
            />
            <label class="form-check-label" for="q17_option3"
              >The dog ran fast.</label
            >
          </div>
        </div>
      </div>

      <!-- Section 10: Sentence Combining Practice -->
      <div class="card mb-3 question">
        <div class="card-body">
          <p class="card-text">
            18. Combine these sentences into one effective sentence:<br />
            "The storm was coming. We decided to stay inside. We played board
            games."
          </p>
          <textarea class="form-control" name="question_18" rows="2"></textarea>
          <small class="text-muted"
            >Example: When the storm was coming, we decided to stay inside and
            play board games.</small
          >
        </div>
      </div>

      <div class="card mb-3 question">
        <div class="card-body">
          <p class="card-text">
            19. Rewrite this sentence to make it more interesting:<br />
            "The cat sat."
          </p>
          <textarea class="form-control" name="question_19" rows="2"></textarea>
          <small class="text-muted"
            >Example: The fluffy gray cat sat lazily on the sunny
            windowsill.</small
          >
        </div>
      </div>

      <!-- Section 11: Sentence Analysis -->
      <div class="card mb-3 question">
        <div class="card-body">
          <p class="card-text">
            20. Identify the independent clause in this sentence:<br />
            "Although it was raining, we went for a walk because we needed
            exercise."
          </p>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_20"
              id="q20_option1"
              value="Although it was raining"
            />
            <label class="form-check-label" for="q20_option1"
              >Although it was raining</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_20"
              id="q20_option2"
              value="we went for a walk"
              correct="true"
            />
            <label class="form-check-label" for="q20_option2"
              >we went for a walk</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_20"
              id="q20_option3"
              value="because we needed exercise"
            />
            <label class="form-check-label" for="q20_option3"
              >because we needed exercise</label
            >
          </div>
        </div>
      </div>

      <!-- Section 12: Sentence Combining Techniques -->
      <div class="card mb-3 question">
        <div class="card-body">
          <h5 class="card-title">Sentence Combining Techniques</h5>
          <p class="card-text">
            21. Which sentence correctly uses a semicolon to combine two
            independent clauses?
          </p>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_21"
              id="q21_option1"
              value="I love reading; especially mystery novels."
            />
            <label class="form-check-label" for="q21_option1"
              >I love reading; especially mystery novels.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_21"
              id="q21_option2"
              value="I love reading; I especially enjoy mystery novels."
              correct="true"
            />
            <label class="form-check-label" for="q21_option2"
              >I love reading; I especially enjoy mystery novels.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_21"
              id="q21_option3"
              value="I love reading, I especially enjoy mystery novels."
            />
            <label class="form-check-label" for="q21_option3"
              >I love reading, I especially enjoy mystery novels.</label
            >
          </div>
        </div>
      </div>

      <div class="card mb-3 question">
        <div class="card-body">
          <p class="card-text">
            22. Which sentence correctly uses a conjunctive adverb to combine
            clauses?
          </p>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_22"
              id="q22_option1"
              value="I wanted to go to the concert, however I had too much homework."
            />
            <label class="form-check-label" for="q22_option1"
              >I wanted to go to the concert, however I had too much
              homework.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_22"
              id="q22_option2"
              value="I wanted to go to the concert; however, I had too much homework."
              correct="true"
            />
            <label class="form-check-label" for="q22_option2"
              >I wanted to go to the concert; however, I had too much
              homework.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_22"
              id="q22_option3"
              value="I wanted to go to the concert but however I had too much homework."
            />
            <label class="form-check-label" for="q22_option3"
              >I wanted to go to the concert but however I had too much
              homework.</label
            >
          </div>
        </div>
      </div>

      <!-- Section 13: Sentence Structure in Paragraphs -->
      <div class="card mb-3 question">
        <div class="card-body">
          <p class="card-text">
            23. Which paragraph has the best sentence structure variety?
          </p>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_23"
              id="q23_option1"
              value="We went to the beach. The sun was shining. The waves were big. We swam all day."
            />
            <label class="form-check-label" for="q23_option1"
              >We went to the beach. The sun was shining. The waves were big. We
              swam all day.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_23"
              id="q23_option2"
              value="When we arrived at the beach, the sun was shining brightly. Because the waves were so big, we decided to swim all day long."
              correct="true"
            />
            <label class="form-check-label" for="q23_option2"
              >When we arrived at the beach, the sun was shining brightly.
              Because the waves were so big, we decided to swim all day
              long.</label
            >
          </div>
          <div class="form-check">
            <input
              class="form-check-input"
              type="radio"
              name="question_23"
              id="q23_option3"
              value="The beach was fun. The sun was out. The water was nice. We had a good time."
            />
            <label class="form-check-label" for="q23_option3"
              >The beach was fun. The sun was out. The water was nice. We had a
              good time.</label
            >
          </div>
        </div>
      </div>

      <!-- Section 14: Sentence Imitation -->
      <div class="card mb-3 question">
        <div class="card-body">
          <p class="card-text">
            24. Write a sentence that follows this structure:<br />
            "Although it was cold outside, we decided to go for a walk in the
            park."
          </p>
          <textarea class="form-control" name="question_24" rows="2"></textarea>
          <small class="text-muted"
            >Example: Although I was tired, I stayed up to finish my
            book.</small
          >
        </div>
      </div>

      <!-- Section 15: Sentence Revision -->
      <div class="card mb-3 question">
        <div class="card-body">
          <p class="card-text">
            25. Revise this sentence to make it more effective:<br />
            "The test was hard and I studied a lot but I didn't do well."
          </p>
          <textarea class="form-control" name="question_25" rows="2"></textarea>
          <small class="text-muted"
            >Example: Although I studied a lot for the hard test, I didn't do
            well.</small
          >
        </div>
      </div>
    </div>
    <div id="results" class="mt-4"></div>
    <button type="button" id="check-answers-btn" class="btn btn-primary">
      Check Answers
    </button>
    <button
      type="submit"
      id="submit-btn"
      class="btn btn-success"
      style="display: none"
    >
      Submit Exam
    </button>
  </form>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
      const form = document.getElementById('exam-form');
      const timerDisplay = document.getElementById('timer');
      const durationMinutes = {{ exam.duration_minutes }};
      let timeRemaining = durationMinutes * 60; // in seconds
      let timerInterval;

      function updateTimer() {
          const minutes = Math.floor(timeRemaining / 60);
          const seconds = timeRemaining % 60;
          timerDisplay.textContent = `Time Left: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

          if (timeRemaining <= 0) {
              clearInterval(timerInterval);
              alert('Time is up! Your exam will be submitted automatically.');
              submitExam();
          } else {
              timeRemaining--;
          }
      }

      function submitExam() {
          // Create a hidden input to indicate auto-submission
          const autoSubmitInput = document.createElement('input');
          autoSubmitInput.type = 'hidden';
          autoSubmitInput.name = 'auto_submit';
          autoSubmitInput.value = 'true';
          form.appendChild(autoSubmitInput);
          form.submit();
      }

      // Start the timer when the page loads
      timerInterval = setInterval(updateTimer, 1000);

      // Warn user before navigating away
      window.addEventListener('beforeunload', function (e) {
          // Only warn if the exam hasn't been submitted yet
          if (form.dataset.submitted !== 'true') {
              const confirmationMessage = 'Navigating away from this page will automatically submit and grade your exam. Are you sure you want to leave?';
              (e || window.event).returnValue = confirmationMessage; // Standard for most browsers
              return confirmationMessage; // For some older browsers
          }
      });

      // Auto-submit if user navigates away
      window.addEventListener('unload', function () {
          if (form.dataset.submitted !== 'true') {
              // This will only work if the browser allows synchronous XHR on unload,
              // which is generally deprecated. A better approach is to rely on
              // the server-side to handle incomplete exams or use Beacon API.
              // For this exercise, we'll assume a simple form submission is sufficient
              // if the user confirms leaving.
              // However, the primary mechanism for auto-submission will be the timer.
              // The beforeunload warning is the main deterrent for accidental navigation.
              // For actual submission on unload, a small fetch request might be more reliable
              // but is outside the scope of simple form submission.
              // For now, we'll just ensure the timer handles the auto-submit.
          }
      });

      // Mark form as submitted when the submit button is clicked
      form.addEventListener('submit', function() {
          form.dataset.submitted = 'true';
          clearInterval(timerInterval); // Stop the timer on manual submission
      });
  });
</script>
{% endblock %}
